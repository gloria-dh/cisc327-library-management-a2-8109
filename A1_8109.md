## Part 2 - Project Implementation Status

|     Requirements              | Function Name                                                                          | Implementation Status (complete/ partial) | What is missing?                                                                                                                                                                                                                                                                                                            |
|-------------------------------|----------------------------------------------------------------------------------------|-------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| R1: Add Book To Catalog       | add_book_to_catalog() in library_service.py                                            | Partial                                   | All other requirements are met except a check to make sure that the entered ISBN only includes digits/ numbers.                                                                                                                                                                                                             |
| R2: Book Catalog Display      | catalog() in catalog_routes.py, catalog.html                                           | Complete/ Partial                                   | The requirements specify that the cell format should display as “Available copies/ total copies.” The actual implementation shows “Not Available” when there are 0 copies left leaving out how many are borrowed. Although this makes sense for the user and UI purposes, it doesn’t exactly align with the specifications. |
| R3: Book Borrowing Interface  | borrow_book_by_patron() in library_service.py,   borrow_book() in borrowing_routes     | Partial                                   | Issue with patron borrowing limits. Code checks if “current_borrowed > 5” before showing an error. This allows the user to borrow 6 books maximum instead of 5. Technically book ID does not have to be explicitly entered into the form since the user selects the book column.                                            |
| R4: Book Return Processing    | return_book_by_patron() in library_service.py                                          | Partial/ Incomplete                       | Patron ID and Book ID are the form parameters but no functionality or input checks are implemented. All requirements defined in R4 are missing.                                                                                                                                                                             |
| R5: Late Fee Calculation API  | calculate_late_fee_for_book() in   library_service.py, get_late_fee() in api_routes.py | Partial/ Incomplete                       | Route is correct but no implementation aside from returning “not implemented/ 501.” All requirements defined in R5 are missing.                                                                                                                                                                                             |
| R6: Book Search Functionality | search_books_in_catalog() in library_service.py,   search_books_api() in api_routes    | Partial/ Incomplete                       | An API route that reads “q” and “type” exists but all requirements defined in R6 are missing.                                                                                                                                                                                                                               |
| R7: Patron Status Report      | get_patron_status_report() in library_service.py                                       | Partial/ Incomplete                       | All requirements defined in R7 are missing.                                                                                                                                                                                                                                                                                 |

## Part 3 - Writing Unit Test

>`IMPORTANT NOTE:` to prevent writing to the actual database for running tests, a fixture was added in conftest.py to create a temporary copy of the database to run the pytests on. This was done because duplicate entries with the same isbn would lead to failures when the test is run more than once.

### Requirement 1

The functions below were used to test R1 (Add Book to Catalog). All isbn values are unique for each function test. Tests are focused on the function ***add_book_to_catalog*** in library_service.py.

>test_add_book_valid_input()

Adding a valid input with a unique isbn. `Expectation:` pass pytest, function implemented.

>test_add_book_invalid_isbn_too_short()

Adding a book with an isbn value shorter than the required 13 digits. `Expectation:` pass pytest, check implemented.

>test_add_book_invalid_isbn_too_long()

Adding a book with an isbn value longer than the required 13 digits. `Expectation:` pass pytest, check implemented.

>test_add_book_invalid_total_copies_negative_input()

Adding a book with a negative value for total copies. `Expectation:` pass pytest, check implemented.

>test_add_book_invalid_title_more_than_two_hundred_char()

Adding a book with a title longer than 200 characters. `Expectation:` pass pytest, check implemented.

>test_add_book_invalid_author_more_than_one_hundred_char()

Adding a book with an author name longer than 100 characters. `Expectation:` pass pytest, check implemented.

>test_add_book_invalid_missing_title_input()

Adding a book with no entry for the title. `Expectation:` pass pytest, check implemented.

>test_add_book_invalid_isbn_with_letters()

Adding a book with letter entries in the isbn but the proper number of characters (13). `Expectation:` fail pytest, check NOT implemented.


### Requirement 2

The functions below were used to test R2 (Book Catalog Display). All isbn values are unique for each function test. Operations in database.py were used to modify the database before testing the borrow function (e.g., inserting a book to check catalog updates). 

***Note: fixtures were used to provide a test client in conftest.py so a real server is not required to run tests.***

>test_catalog_renders_valid(client)

Checks to see if the catalog page renders. `Expectation:` pass pytest, page implemented

>test_catalog_valid(client)

Adding a book to the catalog and checking if it’s in the html text for the catalog. `Expectation:` pass pytest, page implemented.

>test_catalog_valid_avail_over_total_copies_2_3(client)

Check the catalog display when 2 of 3 books are available. `Expectation:` pass pytest, page implemented.

>test_catalog_valid_avail_over_total_copies_0_2(client)

Check the catalog display when 0 copies are available out of 2. Functional requirement states the display should be shown as “available /total”. In this case it states “Not Available” which is not wrong but does not match the exact specifications. `Expectation:` fail pytest

### Requirement 3

The functions below were used to test R3 (Book Borrowing Interface). All isbn values are unique for each function test. Tests are focused on the function ***borrow_book_by_patron*** in library_service.py. Operations in database.py were used to modify the database before testing the borrow function (e.g., inserting a book to be borrowed).

>test_borrow_book_valid_input()

Borrowing a book with a valid patron ID. `Expectation:` pass pytest, check implemented.

>test_borrow_book_invalid_patron_id_with_letters()

Borrowing a book with a patron ID containing letters. `Expectation:` pass pytest, check implemented.

>test_borrow_book_invalid_patron_id_more_than_six_digits()

Borrowing a book with a patron ID longer than 6 digits. `Expectation:` pass pytest, check implemented.

>test_borrow_book_invalid_borrow_more_than_five_books()

Borrowing a book that was just added showing 6 available copies and checking that the first 5 can be borrowed with no issue, while subsequent “borrows” will be rejected. `Expectation:` fail pytest, check NOT implemented.

### Requirement 4

The functions below were used to test R4 (Book Return Processing). All isbn values are unique for each function test. Tests are focused on the function ***return_book_by_patron*** in library_service.py. Operations in database.py were used to modify the database before testing the borrow function (e.g., inserting a book and borrowing that same book to be returned).

>test_return_book_valid_input()

Returning a book with a valid patron ID and book ID. `Expectation:` fail pytest, check NOT implemented.

>test_return_book_invalid_not_borrowed_by_patron()

Returning a book with a patron ID that does not match the one used to borrow. `Expectation:` fail pytest, check NOT implemented.

>test_return_book_invalid_book_id_not_found()

Returning a book using a book ID that has not bee borrowed. `Expectation:` fail pytest, check NOT implemented.

>test_return_book_valid_available_copies_updated()

Logs the available copies count after borrowing and returning a book to confirm if the number of copies is updating with the functionality. `Expectation:` fail pytest, check NOT implemented.

### Requirement 5

The functions below were used to test R5 (Late Fee Calculation API). All isbn values are unique for each function test. Tests are focused on the function ***calculate_late_fee_for_book*** in library_service.py. Operations in database.py were used to modify the database before testing the borrow function (e.g., inserting a book, borrowing that same book and adjusting the due date). 

>test_calculate_late_fee_valid_input_5_days_overdue()

Checking the fee on a book registered as 5 days late. $0.50 increment per day. `Expectation:` fail pytest, check NOT implemented.

>test_calculate_late_fee_valid_input_9_days_overdue()

Checking the fee on a book registered 9 days late. $0.50 increment for the first 7 days and $1 increment past 7. `Expectation:` fail pytest, check NOT implemented.

>test_calculate_late_fee_valid_input_20_days_overdue()

Checking the fee on a book registered as 20 days late. Fee should be $15 max. `Expectation:` fail pytest, check NOT implemented.

>test_calculate_late_fee_valid_input_not_overdue()

Checking the fee for a book that is not late. No fee. `Expectation:` fail pytest, check NOT implemented.

### Requirement 6

The functions below were used to test R6 (Book Search Functionality). All isbn values are unique for each function test. Tests are focused on the function ***search_books_in_catalog*** in library_service.py. Operations in database.py were used to modify the database before testing the borrow function (e.g., inserting a book to be searched). 

>test_search_books_valid_title()

Searching for a book with a title matching the book recently added. `Expectation:` fail pytest, check NOT implemented.

>test_search_books_valid_author()

Searching for a book with an author name matching the book recently added. `Expectation:` fail pytest, check NOT implemented.

>test_search_books_valid_isbn()

Searching for a book with an isbn matching the book recently added. `Expectation:` fail pytest, check NOT implemented.

>test_search_books_invalid_isbn()

Searching for a book with an invalid isbn. Since the function is not implemented, this should return true since the book list is empty. `Expectation:` pass pytest, check NOT implemented. 

### Requirement 7

The functions below were used to test R7 (Patron Status Report). All isbn values are unique for each function test. Tests are focused on the function ***get_patron_status_report*** in library_service.py. Operations in database.py were used to modify the database before testing the borrow function (e.g., inserting a book, borrowing the book and returning the book with a specific patron ID). Note: the following assumption of the function output format was made of a dictionary format (key: patron ID)

```bash
# return {
#       'currently_borrowed': [{'title': "book 1", 'author': "Steve", 'due_date': "2025/09/18"}, {'title': "book 2", ..., ..., ...}],
#       'total_late_fees': 0,
#       'num_borrowed_books': 2,
#       'borrowing_history': {book 1, book 2}
#       }
```

>test_patron_status_valid_id_no_late()

Getting the status of a patron with no late books. `Expectation:` fail pytest, check NOT implemented.

>test_patron_status_invalid_non_exisitent_id()

Getting the status of a patron id thats not in the system. `Expectation:` fail pytest, check NOT implemented.

>test_patron_status_valid_invalid_with_letters_id()

Getting the status using a patron ID with invalid characters. `Expectation:` fail pytest, check NOT implemented.

>test_patron_status_valid_id_with_late_5_days()

Getting the status of a patron with a book that is 5 days late. `Expectation:` fail pytest, check NOT implemented.
